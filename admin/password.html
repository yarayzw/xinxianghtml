<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>筋斗云管理系统</title>
    <link href="../css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="../css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link href="../css/animate.min.css" rel="stylesheet">
    <link href="../css/style.min862f.css?v=4.1.0" rel="stylesheet">
    <link href="../css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
</head>
<body>
    <div class="ibox">
        <div class="ibox-content">
            <div class="row">
                <div class="col-sm-12">
                    <form class="form-horizontal m">
                        <div class="form-group">
                            <label class="col-sm-3 control-label is-required">旧密码：</label>
                            <div class="col-sm-8">
                                <input name="old_pass" class="form-control" type="password" minlength="6" maxlength="30" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label is-required">新密码：</label>
                            <div class="col-sm-8">
                                <input name="pass" class="form-control" type="password" minlength="6" maxlength="30" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label is-required">确认密码：</label>
                            <div class="col-sm-8">
                                <input name="confirm_pass" class="form-control" type="password" minlength="6" maxlength="30" required>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="box-footer">
            <div class="col-sm-offset-5 col-sm-6">
                <button type="button" class="btn btn-sm btn-primary" onclick="submitHandler()"><i class="fa fa-check"></i>保 存</button>&nbsp;
            </div>
        </div>
    </div>

    <script src="../js/jquery.min.js?v=2.1.4"></script>
    <script src="../js/bootstrap.min.js?v=3.3.6"></script>
    <script src="../js/layer/layer.js"></script>
    <script src="../js/public.js"></script>

    <!--jquery-validate-->
    <script src="../js/jquery-validate/jquery.validate.min.js"></script>
    <script src="../js/jquery-validate/additional-methods.min.js"></script>
    <script src="../js/jquery-validate/messages_zh.min.js"></script>
    <!--工具-->
    <script src="../js/util.js"></script>
    <script>
        var saveHandler=function () {
            var data=$('form').serializeJson();
            requestData.data=data;
            ajaxGo('admin/user_info/resetPassword');
            if (requestCode!=0){
                $.modal.msgError(requestMessage);
            }else {
                $.modal.msgSuccess(requestMessage);
                setTimeout(function () {
                    window.parent.location.href='../login/index.html';
                },2000);
            }
        };
        function submitHandler() {
            if (!$('form').validate({
                rules:{
                    confirm_pass:{
                        equalTo:'input[name=pass]'
                    }
                },
                messages:{
                    confirm_pass:{
                        equalTo:'输入的值与新密码不止一致'
                    }
                }
            }).form()){
                return false;
            }
            saveHandler();
        }
    </script>
</body>