<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>筋斗云管理系统</title>
    <link href="../css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="../css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link href="../css/animate.min.css" rel="stylesheet">
    <link href="../css/style.min862f.css?v=4.1.0" rel="stylesheet">
    <link href="../css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="../css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../js/simditor-2.3.28/styles/simditor.css">
    <link rel="stylesheet" type="text/css" href="../css/plugins/webuploader/webuploader.css">
    <link rel="stylesheet" type="text/css" href="../css/demo/webuploader-demo.min.css">

    <!--    下来框样式-->
    <link rel="stylesheet" type="text/css" href="../js/plugins/bootstrap-select-1.13.9/dist/css/bootstrap-select.css">
    <link href="../css/jasny-bootstrap.min.css" rel="stylesheet">
</head>
<style>
    /**字符串过长 转化为 。。。**/
    table{
        table-layout:fixed;/* 只有定义了表格的布局算法为fixed，下面td的定义才能起作用。 */
    }
    td{
        max-width: 58px;
        text-overflow:ellipsis;
        overflow: auto;
        white-space: pre-wrap;
    }

    .tr_color{
        background: #FFEE99;
    }

</style>
<body>
<div class="ibox float-e-margins">
    <div class="ibox-content">
        <div class="row row-lg">
            <div class="col-sm-12">
                <!-- Example Toolbar -->
                <div class="example-wrap">
                    <div class="example">
                        <div class="btn-group" id="toolbar" role="group">
                            <a class="btn btn-success" onclick="add()" id="add_button">
                                <i class="fa fa-plus"></i> 添加
                            </a>
                        </div>
                        <table class="table table-hover" id="grid"
                               data-pagination="true"
                               data-show-refresh="true"
                               data-show-toggle="true"
                               data-showColumns="true">
                        </table>
                    </div>
                </div>
                <!-- End Example Toolbar -->
            </div>
        </div>
    </div>
</div>
<!--添加-->
<div class="row" id="add" style="display: none;">
    <div class="col-sm-12">
        <form class="form-horizontal m">
            <div class="form-group">
                <label class="col-sm-3 control-label is-required">图片：</label>
                <div class="col-sm-8">
                    <div class="input-group">
                        <input name="pic" class="form-control" type="text">
                        <div class="file-btn-group input-group-btn" data-provides="fileinput">
                            <span class="btn btn-primary btn-file">选择文件<input type="file" name="..."></span>
                            <span class="btn btn-default" onclick="eyeImage($(this).parent('div').prevAll('input').val())">预览</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label is-required">图标：</label>
                <div class="col-sm-8">
                    <input name="icon" class="form-control" type="text" required>
                </div>
            </div>
        </form>
    </div>
</div>
<!--编辑-->
<div class="row" id="edit" style="display: none;">
    <div class="col-sm-12">
        <form class="form-horizontal m">
            <div class="form-group">
                <label class="col-sm-3 control-label is-required">图片：</label>
                <div class="col-sm-8">
                    <div class="input-group">
                        <input name="pic" class="form-control" type="text">
                        <div class="file-btn-group input-group-btn" data-provides="fileinput">
                            <span class="btn btn-primary btn-file">选择文件<input type="file" name="..."></span>
                            <span class="btn btn-default" onclick="eyeImage($(this).parent('div').prevAll('input').val())">预览</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label is-required">图标：</label>
                <div class="col-sm-8">
                    <input name="icon" class="form-control" type="text" required>
                </div>
            </div>
        </form>
    </div>
</div>

</body>

<script src="../js/jquery.min.js?v=2.1.4"></script>
<script src="../js/public.js"></script>
<script src="../js/bootstrap.min.js?v=3.3.6"></script>
<script src="../js/layer/layer.js"></script>
<script src="../js/content.min.js"></script>
<script src="../js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script src="../js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="../js/demo/bootstrap-table-demo.min.js"></script>
<script src="../js/bootstrapValidator.js"></script>
<script src="../js/bootstrapValidator.min.js"></script>
<script src="../js/index.js"></script>
<script src="../js/plugins/simditor/module.js"></script>
<script src="../js/plugins/simditor/uploader.js"></script>
<script src="../js/plugins/simditor/hotkeys.js"></script>
<script src="../js/simditor-2.3.28/lib/simditor.js"></script>
<script src="../js/plugins/webuploader/webuploader.min.js"></script>
<script src="../js/echarts/dist/echarts.min.js"></script>
<script src="../js/plugins/bootstrap-select-1.13.9/js/bootstrap-select.js"></script>

<script src="../js/fontIcon/list.js"></script>
<script src="../js/jasny-bootstrap.min.js"></script>
<!--工具-->
<script src="../js/util.js"></script>
<script src="../js/clipboard.min.js"></script>
<script>
    $(function () {
        if($.inArray('admin/fonticon/add',u_role_url) === -1){
            $('#add_button').hide();
        }
        /*上传文件处理*/
        $(document).on('input propertychange','.file-btn-group input[type="file"]', function (e) {
            var that=this;
            // 处理自己的业务
            var file=e.currentTarget.files[0];
            if (!file)return;
            uploadFile(file,function (result) {
                if (result.status == 0) {
                    $(that).parents(".file-btn-group").prevAll('input[type="text"]').val(__IMG__+result.path[0]).change();
                } else {
                    $.modal.alertError(result.msg);
                }
            },function () {
                $.modal.alertWarning("图片上传失败。");
            });
            return;
        });
    });
</script>
